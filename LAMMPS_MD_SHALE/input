variable tempx equal bbb
variable lz equal aaa
variable lz1 equal ${lz}+2
variable lz2 equal ${lz}+1

variable nc equal ccc

dimension  3
units           real
atom_style      full
boundary p p p

lattice sc 3.73
region box block  -25 25 -50 50 0 ${lz1} units lattice
create_box 2 box
pair_style  lj/cut  10.0
pair_coeff  1 1   0.294106636 3.73
pair_coeff  2 2   0.294106636 3.73

mass 1 16.043
mass 2 16.043

create_atoms 1 region box

region 1 block INF INF INF INF 0 ${lz2} units lattice
delete_atoms region 1
reset_ids

create_atoms 2 random ${nc} 53641 1
write_data M.data
group gcmcg type 2
group wall type 1
neighbor 2.0 bin
neigh_modify every 1 delay 10 check yes
neigh_modify exclude group wall wall
velocity gcmcg create ${tempx} 4928459 rot yes dist gaussian
#------------- Run the simulation for equilibration -------------

timestep        0.1
fix fxlan gcmcg langevin 1.0 1.0 100.0 48279
fix fxnve gcmcg nve/limit 0.1   # <-- needed by fix langevin (see lammps documentation)
run 2500
unfix fxlan
unfix fxnve

fix  mynvt gcmcg nvt temp ${tempx} ${tempx} 100.0
fix mynve wall nve
fix freeze wall setforce 0 0 0
run 1000000
reset_timestep 0
compute        91 gcmcg  chunk/atom bin/1d z lower 1 units box
compute        92 gcmcg  chunk/atom bin/1d z lower 0.1 units box
fix            93 gcmcg ave/chunk 10 50000 500000 91 density/mass ave running file density1.profile
fix            94 gcmcg ave/chunk 10 50000 500000 92 density/mass ave running file density2.profile
thermo         1000
dump DUMP1 all custom 10000 test1.lammpstrj id type mol xu yu zu vx vy vz fx
run 500000
write_data lamp.out
